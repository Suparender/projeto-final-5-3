"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3044],{3044:(J,d,l)=>{l.r(d),l.d(d,{ContactPageModule:()=>k});var p=l(6814),a=l(95),r=l(7852),m=l(7928),h=l(5861),t=l(9468),g=l(4073),f=l(7826),u=l(9493),Z=l(553),_=l(6033),v=l(7394),b=l(2283);function C(o,c){if(1&o&&t._UZ(0,"ion-img",22),2&o){const e=t.oxw(2);t.Q6J("src",e.imagem.url)}}function x(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.general.getPhoto(i.imagem))}),t._UZ(1,"ion-icon",24),t._uU(2," Selecionar "),t.qZA()}}function T(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.general.getPhoto(i.imagem))}),t._UZ(1,"ion-icon",25),t._uU(2," Alterar "),t.qZA()}}function A(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"form",9)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._UZ(4,"ion-input",10),t.qZA(),t.TgZ(5,"p"),t._UZ(6,"ion-input",11),t.qZA(),t.TgZ(7,"p")(8,"ion-input",12),t.NdJ("keyup",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getCep())}),t.qZA()(),t.TgZ(9,"p"),t._UZ(10,"ion-input",13),t.qZA(),t.TgZ(11,"p"),t._UZ(12,"ion-input",14),t.qZA(),t.TgZ(13,"p"),t._UZ(14,"ion-input",15),t.qZA(),t.TgZ(15,"p"),t._UZ(16,"ion-input",16),t.qZA(),t.TgZ(17,"p"),t._UZ(18,"ion-textarea",17),t.qZA(),t.TgZ(19,"p"),t._uU(20,"Adicionar imagem:"),t.qZA(),t.YNc(21,C,1,1,"ion-img",18),t.YNc(22,x,3,0,"ion-button",19),t.YNc(23,T,3,0,"ion-button",19),t.TgZ(24,"p")(25,"ion-button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sendForm())}),t._UZ(26,"ion-icon",21),t._uU(27," Enviar "),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.contactForm),t.xp6(2),t.hij("Preencha todos os campos abaixo para entrar em contato com a equipe do ",e.env.appName,"."),t.xp6(2),t.Q6J("autofocus",!0),t.xp6(14),t.Q6J("autoGrow",!0),t.xp6(3),t.Q6J("ngIf",e.imagem.uploaded),t.xp6(1),t.Q6J("ngIf",!e.imagem.uploaded),t.xp6(1),t.Q6J("ngIf",e.imagem.uploaded)}}function I(o,c){1&o&&(t.TgZ(0,"ion-card")(1,"ion-card-content")(2,"p"),t._uU(3,"Detectamos que o usu\xe1rio ainda n\xe3o est\xe1 logado, por favor fa\xe7a login para poder enviar o cantato."),t.qZA(),t.TgZ(4,"ion-button",26),t._UZ(5,"ion-icon",27),t._uU(6," Entrar "),t.qZA()()())}function U(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"h4"),t._uU(2,"Seu contato foi enviado com sucesso."),t.qZA(),t.TgZ(3,"p")(4,"em"),t._uU(5,"Obrigado..."),t.qZA()(),t.TgZ(6,"p")(7,"strong"),t._uU(8,"ID do formul\xe1rio cadastrado:"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"ion-button",28),t._UZ(11,"ion-icon",29),t._uU(12," Voltar ao \xednicio "),t.qZA(),t.TgZ(13,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sended=!1)}),t._UZ(14,"ion-icon",30),t._uU(15," Enviar novo contato "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(9),t.hij(" ",e.idSaved,"")}}const P=[{path:"",component:(()=>{class o{constructor(){this.env=Z.N,this.logged=!1,this.imagem={url:"",format:"",uploaded:!1},this.sending=!1,this.sended=!1,this.firestore=(0,t.f3M)(g.gg),this.auth=(0,t.f3M)(f.gx),this.storage=(0,t.f3M)(u.Ke),this.general=(0,t.f3M)(_.m),this.cepService=(0,t.f3M)(b.q),this.fb=(0,t.f3M)(a.qu),this.contactForm=this.fb.group({}),this.contactsCollection=(0,g.hJ)(this.firestore,"contacts"),this.authState=(0,f.fD)(this.auth),this.authStateSubscription=new v.w0}ngOnInit(){this.contactForm=this.fb.group({name:["",[a.kI.minLength(3),a.kI.pattern("[^0-9]*"),a.kI.required]],email:["",[a.kI.minLength(5),a.kI.email,a.kI.required]],cep:["",[a.kI.minLength(8),a.kI.pattern("[0-9]*"),a.kI.required]],logradouro:["",[a.kI.minLength(3),a.kI.required]],local:["",[a.kI.minLength(3),a.kI.required]],bairro:["",[a.kI.minLength(3),a.kI.required]],subject:["",[a.kI.minLength(3),a.kI.required]],message:["",[a.kI.minLength(5),a.kI.required]]}),this.authStateSubscription=this.authState.subscribe(e=>{var n,i;if(e)return this.logged=!0,null===(n=this.contactForm.get("name"))||void 0===n||n.setValue(e.displayName),void(null===(i=this.contactForm.get("email"))||void 0===i||i.setValue(e.email));this.logged=!1})}ngOnDestroy(){this.authStateSubscription.unsubscribe(),this.sended=!1}sendForm(){var e=this;return(0,h.Z)(function*(){if(!e.imagem.uploaded||e.sending)return;e.sending=!0;const n={form:e.contactForm.value,imagem:{url:"",format:"",name:""},date:"",status:""};try{const i=e.general.getRandomChars(10),s=(0,u.iH)(e.storage,`${i}.${e.imagem.format}`);yield(0,u.sf)(s,e.imagem.url.split(",")[1],"base64",{contentType:`image/${e.imagem.format}`});const E=yield(0,u.Jt)((0,u.iH)(s));n.imagem.url=E,n.imagem.format=e.imagem.format,n.imagem.name=i,n.date=(new Date).toISOString().split(".")[0].replace("T"," "),n.status="received";const F=yield(0,g.ET)(e.contactsCollection,n);e.idSaved=F.id,e.sended=!0}catch(i){console.error("Opsss, deu erro",i)}finally{e.general.formValues(n,null),e.general.formValues(e.contactForm.value,null),e.sending=!1}})()}getCep(){this.contactForm.value.cep.length<8||this.contactForm.value.cep.length>9||this.cepService.getCep(this.contactForm.value.cep).subscribe(e=>{var n,i,s;null===(n=this.contactForm.get("logradouro"))||void 0===n||n.setValue(e.logradouro),null===(i=this.contactForm.get("local"))||void 0===i||i.setValue(e.localidade),null===(s=this.contactForm.get("bairro"))||void 0===s||s.setValue(e.bairro)})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-contact"]],decls:17,vars:7,consts:[[3,"translucent"],["slot","start"],[1,"ion-text-center"],["name","chatbubbles","slot","end","size","large",1,"ion-margin"],[1,"ion-padding"],["action","",3,"formGroup",4,"ngIf"],[4,"ngIf"],["showBackdrop","false","message","Carregando...","spinner","circles",1,"custom-loading",3,"isOpen"],["target","_blank","title","copyright",3,"href"],["action","",3,"formGroup"],["label","Nome:","type","text","name","name","label-placement","floating","fill","outline","placeholder","Seu nome completo","error-text","Nome inv\xe1lido!","formControlName","name",3,"autofocus"],["label","Email:","type","email","name","email","label-placement","floating","fill","outline","placeholder","Seu e-mail","error-text","E-mail inv\xe1lido!","formControlName","email"],["label","Cep:","type","text","name","cep","label-placement","floating","fill","outline","placeholder","Seu cep","error-text","Cep inv\xe1lido!","formControlName","cep",3,"keyup"],["label","Estado:","type","text","name","logradouro","label-placement","floating","fill","outline","placeholder","Seu estado","error-text","Estado inv\xe1lido!","formControlName","logradouro"],["label","Cidade:","type","text","name","local","label-placement","floating","fill","outline","placeholder","Sua cidade","error-text","Local inv\xe1lido!","formControlName","local"],["label","Bairro:","type","text","name","bairro","label-placement","floating","fill","outline","placeholder","Seu bairro","error-text","Bairro inv\xe1lido!","formControlName","bairro"],["label","Assunto:","type","text","name","subject","label-placement","floating","fill","outline","placeholder","Assunto do contato","error-text","Assunto inv\xe1lido!","formControlName","subject"],["label","Mensagem:","name","message","labelPlacement","floating","fill","outline","placeholder","Mensagem do contato","error-text","Mensagem inv\xe1lida!","formControlName","message",3,"autoGrow"],["style","height: 250px;","alt","Foto carregada",3,"src",4,"ngIf"],[3,"click",4,"ngIf"],["type","submit",3,"click"],["name","send","slot","start"],["alt","Foto carregada",2,"height","250px",3,"src"],[3,"click"],["name","camera","slot","start"],["name","pencil","slot","start"],["routerLink","/login"],["name","log-in","slot","start"],["routerLink","/home"],["name","home","slot","start"],["name","refresh","slot","start"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title",2),t._uU(5,"Fa\xe7a Contato"),t.qZA(),t._UZ(6,"ion-icon",3),t.qZA()(),t.TgZ(7,"ion-content",4),t.YNc(8,A,28,7,"form",5),t.YNc(9,I,7,0,"ion-card",6),t.YNc(10,U,16,1,"div",6),t._UZ(11,"ion-loading",7),t.qZA(),t.TgZ(12,"ion-footer")(13,"ion-toolbar")(14,"ion-title",2)(15,"a",8),t._uU(16),t.qZA()()()()),2&e&&(t.Q6J("translucent",!0),t.xp6(8),t.Q6J("ngIf",!n.sended&&n.logged),t.xp6(1),t.Q6J("ngIf",!n.logged),t.xp6(1),t.Q6J("ngIf",n.sended&&n.logged),t.xp6(1),t.Q6J("isOpen",n.sending),t.xp6(4),t.Q6J("href",n.env.authorUrl,t.LSH),t.xp6(1),t.hij("\xa9 2023 ",n.env.author,"."))},dependencies:[p.O5,a._Y,a.JJ,a.JL,r.YG,r.Sm,r.PM,r.FN,r.W2,r.fr,r.Gu,r.gu,r.Xz,r.pK,r.wh,r.fG,r.g2,r.wd,r.sr,r.j9,r.YI,m.rH,a.sg,a.u]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(P),m.Bz]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,a.u5,r.Pc,y,a.UX]}),o})()}}]);