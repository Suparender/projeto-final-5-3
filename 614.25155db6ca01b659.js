"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[614],{614:(P,f,l)=>{l.r(f),l.d(f,{EditPageModule:()=>A});var c=l(6814),d=l(95),i=l(7852),u=l(7928),p=l(5861),e=l(9468),g=l(4073),m=l(9493),Z=l(2283),_=l(6033),M=l(553);function T(t,s){if(1&t&&e._UZ(0,"ion-img",16),2&t){const o=e.oxw();e.MGl("alt","Foto do contato ",o.documents.form.name,""),e.Q6J("src",o.documents.imagem.url)}}function C(t,s){if(1&t&&e._UZ(0,"ion-img",16),2&t){const o=e.oxw();e.MGl("alt","Foto alterada do contato ",o.documents.form.name,""),e.Q6J("src",o.imagem.url)}}const J=[{path:"",component:(()=>{class t{constructor(){this.env=M.N,this.alertSend=!1,this.alertButtons=[{text:"Cancel",handler:()=>{this.alertSend=!1}},{text:"Confirm",handler:()=>{this.sendForm()}}],this.imagem={url:"",format:"",uploaded:!1},this.form={name:"",email:"",cep:"",logradouro:"",local:"",bairro:"",subject:"",message:""},this.sending=!1,this.docId="0",this.general=(0,e.f3M)(_.m),this.cepService=(0,e.f3M)(Z.q),this.firestore=(0,e.f3M)(g.gg),this.storage=(0,e.f3M)(m.Ke),this.router=(0,e.f3M)(u.F0),this.contactsCollection=(0,g.hJ)(this.firestore,"contacts")}ngOnInit(){var o=this;return(0,p.Z)(function*(){o.docId=void 0===history.state.index?"0":history.state.index,"0"==o.docId&&o.router.navigate(["/home"]),o.docSnap=yield(0,g.QT)((0,g.JU)(o.firestore,"contacts",o.docId)),o.documents=yield o.docSnap.data(),null==o.documents&&location.reload(),o.form.name=o.documents.form.name,o.form.email=o.documents.form.email,o.form.cep=o.documents.form.cep,o.form.logradouro=o.documents.form.logradouro,o.form.local=o.documents.form.local,o.form.bairro=o.documents.form.bairro,o.form.subject=o.documents.form.subject,o.form.message=o.documents.form.message})()}ngOnDestroy(){this.general.formValues(this.form,null),this.general.formValues(this.documents,null)}sendForm(){var o=this;return(0,p.Z)(function*(){if(o.imagem.uploaded&&!o.sending){o.sending=!0;try{var n=o.documents.imagem.name;if(o.imagem.uploaded){const r=(0,m.cF)(),a=(0,m.iH)(r,`${o.documents.imagem.name}.${o.documents.imagem.format}`);yield(0,m.oq)(a).catch(y=>{console.log("Erro ao deletar a imagem",y)}),n=o.general.getRandomChars(10);const h=(0,m.iH)(o.storage,`${n}.${o.imagem.format}`);yield(0,m.sf)(h,o.imagem.url.split(",")[1],"base64",{contentType:`image/${o.imagem.format}`});const v=yield(0,m.Jt)((0,m.iH)(h));o.documents.imagem.url=v,o.documents.imagem.format=o.imagem.format}yield(0,g.r7)((0,g.JU)(o.firestore,"documents",o.docId),{form:{name:o.form.name,email:o.form.email,cep:o.form.cep,logradouro:o.form.logradouro,local:o.form.local,subject:o.form.subject,message:o.form.message},imagem:{url:o.imagem.url,format:o.imagem.format,name:n}})}catch(r){return console.error("Erro ao enviar o formul\xe1rio",r),void(o.sending=!1)}finally{o.general.formValues(o.form,null),o.general.formValues(o.documents,null),o.sending=!1,setTimeout(()=>{o.router.navigate(["/home"])},1e3)}}})()}getCep(){this.form.cep.length<8||this.form.cep.length>9||this.cepService.getCep(this.form.cep).subscribe(o=>{this.form.logradouro=o.logradouro,this.form.local=o.localidade,this.form.bairro=o.bairro})}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit"]],decls:66,vars:16,consts:[[3,"translucent"],["slot","start"],[1,"ion-text-center"],["name","pencil","size","large","slot","end",1,"ion-margin"],["position","floating"],["type","text","autofocus","true",3,"ngModel","ngModelChange"],["type","email","autofocus","true",3,"ngModel","ngModelChange"],["type","text","autofocus","true",3,"ngModel","ngModelChange","keuyp"],["auto-grow","true",3,"ngModel","ngModelChange"],["style","height: 250px;",3,"src","alt",4,"ngIf"],[3,"click"],["name","pencil","slot","start"],["name","send","slot","start"],["header","Realmente deseja alterar os dados deste contato?",3,"buttons","isOpen"],["showBackdrop","false","message","Carregando...","spinner","circles",1,"custom-loading",3,"isOpen"],["target","_blank","title","copyright",3,"href"],[2,"height","250px",3,"src","alt"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",2),e._uU(5,"Editar Contato"),e.qZA(),e._UZ(6,"ion-icon",3),e.qZA()(),e.TgZ(7,"ion-content")(8,"p"),e._uU(9,'Altere os dados dos campos e aperte "enviar para editar o contato".'),e.qZA(),e.TgZ(10,"p")(11,"ion-item")(12,"ion-label",4),e._uU(13,"Nome:"),e.qZA(),e.TgZ(14,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.form.name=a}),e.qZA()()(),e.TgZ(15,"p")(16,"ion-item")(17,"ion-label",4),e._uU(18,"E-mail:"),e.qZA(),e.TgZ(19,"ion-input",6),e.NdJ("ngModelChange",function(a){return n.form.email=a}),e.qZA()()(),e.TgZ(20,"p")(21,"ion-item")(22,"ion-label",4),e._uU(23,"Cep:"),e.qZA(),e.TgZ(24,"ion-input",7),e.NdJ("ngModelChange",function(a){return n.form.cep=a})("keuyp",function(){return n.getCep()}),e.qZA()()(),e.TgZ(25,"p")(26,"ion-item")(27,"ion-label",4),e._uU(28,"Estado:"),e.qZA(),e.TgZ(29,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.form.logradouro=a}),e.qZA()()(),e.TgZ(30,"p")(31,"ion-item")(32,"ion-label",4),e._uU(33,"Cidade:"),e.qZA(),e.TgZ(34,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.form.local=a}),e.qZA()()(),e.TgZ(35,"p")(36,"ion-item")(37,"ion-label",4),e._uU(38,"Bairro:"),e.qZA(),e.TgZ(39,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.form.bairro=a}),e.qZA()()(),e.TgZ(40,"p")(41,"ion-item")(42,"ion-label",4),e._uU(43,"Assunto:"),e.qZA(),e.TgZ(44,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.form.subject=a}),e.qZA()()(),e.TgZ(45,"p")(46,"ion-item")(47,"ion-label",4),e._uU(48,"Mensagem:"),e.qZA(),e.TgZ(49,"ion-textarea",8),e.NdJ("ngModelChange",function(a){return n.form.message=a}),e.qZA()()(),e.YNc(50,T,1,2,"ion-img",9),e.YNc(51,C,1,2,"ion-img",9),e.TgZ(52,"ion-button",10),e.NdJ("click",function(){return n.general.getPhoto(n.imagem)}),e._UZ(53,"ion-icon",11),e._uU(54," Alterar "),e.qZA(),e.TgZ(55,"p")(56,"ion-button",10),e.NdJ("click",function(){return n.alertSend=!0}),e._UZ(57,"ion-icon",12),e._uU(58," Enviar "),e.qZA()(),e._UZ(59,"ion-alert",13)(60,"ion-loading",14),e.qZA(),e.TgZ(61,"ion-footer")(62,"ion-toolbar")(63,"ion-title",2)(64,"a",15),e._uU(65),e.qZA()()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(14),e.Q6J("ngModel",n.form.name),e.xp6(5),e.Q6J("ngModel",n.form.email),e.xp6(5),e.Q6J("ngModel",n.form.cep),e.xp6(5),e.Q6J("ngModel",n.form.logradouro),e.xp6(5),e.Q6J("ngModel",n.form.local),e.xp6(5),e.Q6J("ngModel",n.form.bairro),e.xp6(5),e.Q6J("ngModel",n.form.subject),e.xp6(5),e.Q6J("ngModel",n.form.message),e.xp6(1),e.Q6J("ngIf",!n.imagem.uploaded),e.xp6(1),e.Q6J("ngIf",n.imagem.uploaded),e.xp6(8),e.Q6J("buttons",n.alertButtons)("isOpen",n.alertSend),e.xp6(1),e.Q6J("isOpen",n.sending),e.xp6(4),e.Q6J("href",n.env.authorUrl,e.LSH),e.xp6(1),e.hij("\xa9 2023 ",n.env.author,"."))},dependencies:[c.O5,d.JJ,d.On,i.Ge,i.YG,i.Sm,i.W2,i.fr,i.Gu,i.gu,i.Xz,i.pK,i.Ie,i.Q$,i.wh,i.fG,i.g2,i.wd,i.sr,i.j9]}),t})()}];let E=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(J),u.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,d.u5,i.Pc,E]}),t})()}}]);